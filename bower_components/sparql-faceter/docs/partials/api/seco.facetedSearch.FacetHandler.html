<a href="https://github.com/SemanticComputing/angular-semantic-faceted-search/edit/master/src/facets/facets.facet-handler.service.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/SemanticComputing/angular-semantic-faceted-search/blob/e8f6a10/src/facets/facets.facet-handler.service.js#L74" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">FacetHandler</code>
<div><span class="hint">service in module <code ng:non-bindable="">seco.facetedSearch</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="seco-facetedsearch-facethandler-page"><p>Service for mediating the communication between facets.</p>
<p>When created, the FacetHandler object broadcasts a <code>sf-initial-constraints</code> event
on the given scope, with the following structure:</p>
<ul>
<li><strong>constraint</strong> - <code>{Array}</code> - The constraints as generated by all the facets,
plus any initial constraints defined in the init configuration.</li>
<li><strong>facets</strong> - <code>{Object}</code> - A collection of facet states where the key is the
<code>facetId</code> of the facet, and value is the state as emitted by that facet.</li>
<li><strong>config</strong> - <code>{Object}</code> - The configuration given when instantiating
the FacetHandler.</li>
</ul>
<p>The FacetHandler object listens for two events:</p>
<ul>
<li><strong><code>sf-request-constraints</code></strong> - In response will broadcast a
<code>sf-initial-constraints</code> event
with the same object as above as the argument.</li>
<li><strong><code>sf-facets-changed</code></strong> - In response will broadcast a
<code>sf-facet-constraints</code> event on the scope with the same object as
above, except omitting <code>config</code>.</li>
</ul>
<p>The event names are injectable as constants:</p>
<ul>
<li><code>sf-initial-constraints</code>: <code>EVENT_INITIAL_CONSTRAINTS</code></li>
<li><code>sf-facet-constraints</code>: <code>EVENT_FACET_CONSTRAINTS</code></li>
<li><code>sf-request-constraints</code>: <code>EVENT_REQUEST_CONSTRAINTS</code></li>
<li><code>sf-facet-changed</code>: <code>EVENT_FACET_CHANGED</code></li>
</ul>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage"><pre class="prettyprint linenums">new FacetHandler(config);</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>config</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="seco-facetedsearch-facethandler-page"><p>Configuration object broadcast to all facets at init.
The object has the following properties:</p>
<ul>
<li><strong>scope</strong> - <code>{Object}</code> - The facets&#39; parent scope. This is used for
broadcasting and listening for events.</li>
<li><strong>[endpointUrl]</strong> - <code>{string}</code> - The SPARQL endpoint URL. Optional,
as it is just sent to all listening facets at init, and can also
be given to facets individually.</li>
<li><strong>[constraint]</strong> - <code>{string}</code> - A SPARQL triple pattern that selects
all the resources that are being faceted.</li>
<li><strong>[rdfClass]</strong> - <code>{string}</code> - The <code>rdf:type</code> of the resources being
faceted. A shorthand for <code>constraint: &#39;?id a &lt;class&gt; .&#39;</code>.</li>
<li><strong>[preferredLang]</strong> - <code>{string}</code> - The language tag that is preferred
when getting labels for facet values, in case the value is a resource.
The default is &#39;en&#39;.
Currently only one language can be given.
This argument can also be given directly to the individual facets.</li>
<li><strong>[initialState]</strong> - <code>{Object}</code> - The initial state of the facets.
Used when loading the state from URL parameters, for example.
See <a href="#/api/seco.facetedSearch.facetUrlStateHandlerService"><code>facetUrlStateHandlerService</code></a>.</li>
</ul>
<p>The object is sent to facets as is, and so any extra fields will be included,
although the above fields are the only ones used by FacetHandler and the
built-in facets.</p>
</div></td></tr></tbody></table></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><a href="https://github.com/SemanticComputing/angular-semantic-faceted-search/blob/e8f6a10/src/facets/facets.facet-handler.service.js#L147" class="view-source icon-eye-open"> </a><h3 id="methods_removelisteners">removeListeners()</h3>
<div class="removelisteners"><div class="seco-facetedsearch-facethandler-removelisteners-page"><p>Remove event listeners from the scope.
Probably only needed if you, for some reason, need to
use <code>$rootScope</code> as the communication scope.</p>
</div></div>
</li>
</ul>
</div>
</div>
